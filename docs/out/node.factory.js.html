<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: node.factory.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: node.factory.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file Factory responsible for creating queries based on LUIS user intents predictions
 * @author Jakub Mularski, Shea Magennis, Alex Hein
 * @copyright Great Ormond Street Hospital, 2020
 */

/**
 * Based on LUIS prediction returns an object containing all data necessary to form Neo4J query that contains the response.
 * @param {string} prediction Name of entity predicted by LUIS for user query
 * @returns {object} Object needed to form a response
 */
function returnNodeFromPrediction(prediction) {
  switch (prediction) {

    case "getDrugs":
      return {
        databaseAction: "getNode",
        wantedNode: "[:HAS_DRUG]-(drug:Drug)",
        returnNode: "drug",
        detailNode: "",
        entityNode: "",
      };
    case "getAllergies":
      return {
        databaseAction: "getNode",
        wantedNode: "[:HAS_ALLERGY]-(allergy:Allergy)",
        returnNode: "allergy",
        detailNode: "",
        entityNode: "",
      };
    case "getCarePlan":
      return {
        databaseAction: "getNode",
        wantedNode: "[:HAS_CARE_PLAN]-(careplan:CarePlan)",
        returnNode: "carePlan",
        detailNode: "",
        entityNode: "",
      };
    case "getProcedures":
      return {
        databaseAction: "getNode",
        wantedNode: "[:HAS_PROCEDURE]-(procedure:Procedure)",
        returnNode: "procedure",
        detailNode: "",
        entityNode: "",
      };
    case "getConditions":
      return {
        databaseAction: "getNode",
        wantedNode: "[:HAS_CONDITION]-(condition:Condition)",
        returnNode: "condition",
        detailNode: "",
        entityNode: "",
      };
    case "getAddress":
      return {
        databaseAction: "getEncounterlessNode",
        wantedNode: "[:HAS_ADDRESS]-(address:Address)",
        returnNode: "address.address",
        detailNode: ".address",
        entityNode: "",
      };
    case "getPatientAddresses":
      return {
        databaseAction: "getEncounterlessVal",
        wantedNode: "[:HAS_ADDRESS]-(address:Address)",
        returnNode: "address",
        detailNode: "address",
        entityNode: "DB_addressName",
      };

    case "getPatientConditions":
      return {
        databaseAction: "getVal",
        wantedNode: "[:HAS_CONDITION]-(condition:Condition)",
        returnNode: "condition",
        detailNode: "description",
        entityNode: "DB_conditionName",
      };
    case "getPatientDrugs":
      return {
        databaseAction: "getVal",
        wantedNode: "[:HAS_DRUG]-(drug:Drug)",
        returnNode: "drug",
        detailNode: "description",
        entityNode: "DB_drugDescription",
      };
    case "getPatientAllergies":
      return {
        databaseAction: "getVal",
        wantedNode: "[:HAS_ALLERGY]-(allergy:Allergy)",
        returnNode: "allergy",
        detailNode: "description",
        entityNode: "DB_allergyName",
      };
    case "getPatientCarePlan":
      return {
        databaseAction: "getVal",
        wantedNode: "[:HAS_CARE_PLAN]-(careplan:CarePlan)",
        returnNode: "careplan",
        detailNode: "description",
        entityNode: "DB_carePlanName",
      };
    case "getPatientProcedures":
      return {
        databaseAction: "getVal",
        wantedNode: "[:HAS_PROCEDURE]-(procedure:Procedure)",
        returnNode: "procedure",
        detailNode: "description",
        entityNode: "DB_procedureName",
      };
    /*case "getPatientObservations":
      return {
        databaseAction: "getVal",
        wantedNode: "[:HAS_OBSERVATION]-(observation:Observation)",
        returnNode: "observation",
        detailNode: "",
        entityNode: "DB_observationName",
      };*/

    case "getCommon":
      return {
        databaseAction: "getSame",
        wantedNode: "",
        returnNode: "",
        detailNode: "address",
        entityNode: "",
      };
    default:
      return {
        databaseAction: "None",
        wantedNode: "None",
        returnNode: "None",
        detailNode: "",
        entityNode: "",
      };
  }
}

module.exports = returnNodeFromPrediction;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#getEncounterlessNode">getEncounterlessNode</a></li><li><a href="global.html#getEncounterlessVal">getEncounterlessVal</a></li><li><a href="global.html#getMessageFromPrediction">getMessageFromPrediction</a></li><li><a href="global.html#getMessages">getMessages</a></li><li><a href="global.html#getNode">getNode</a></li><li><a href="global.html#getPrediction">getPrediction</a></li><li><a href="global.html#getSame">getSame</a></li><li><a href="global.html#getVal">getVal</a></li><li><a href="global.html#parseDate">parseDate</a></li><li><a href="global.html#parseNames">parseNames</a></li><li><a href="global.html#returnNodeFromPrediction">returnNodeFromPrediction</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Sun Apr 11 2021 10:22:27 GMT-0600 (Central Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
